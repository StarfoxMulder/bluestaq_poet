<div class="container">
  <header>
    <h1>{{ title }}</h1>
    <p>Explore poetry using the PoetryDB API</p>
  </header>

  <section class="search-section">
    <h2>Search Poetry</h2>
    <div class="search-form">
      <div class="form-group">
        <label for="author">Author:</label>
        <input 
          type="text" 
          id="author"
          [(ngModel)]="authorInput" 
          placeholder="e.g., Shakespeare, Emily Dickinson"
          class="form-control">
      </div>
      
      <div class="form-group">
        <label for="title">Title (optional):</label>
        <input 
          type="text" 
          id="title"
          [(ngModel)]="titleInput" 
          placeholder="e.g., Sonnet, Hope"
          class="form-control">
      </div>
      
      <button (click)="onSearch()" [disabled]="loading" class="btn btn-primary">
        {{ loading ? 'Searching...' : 'Search Poetry' }}
      </button>
      
      <button (click)="testErrorHandling()" class="btn btn-secondary">
        Test Error Handling
      </button>
    </div>
  </section>

  @if (error || poems.length > 0 || loading) {
    <section class="results-section">
      @if (error) {
        <div class="error-message">
          <h3>Error:</h3>
          <p>{{ error }}</p>
        </div>
      }

      @if (loading) {
        <div class="loading-message">
          <p>Loading poetry data...</p>
        </div>
      }

      @if (poems.length > 0 && !loading) {
        <div class="results">
          <h3>Found {{ poems.length }} poem(s)</h3>
          
          @for (poem of poems; track poem.title) {
            <div class="poem-card">
              <h4>{{ poem.title }}</h4>
              <p class="author">by {{ poem.author }}</p>
              <p class="line-count">{{ poem.linecount }} lines</p>
              
              @if (poem.lines.length <= 20) {
                <div class="poem-lines">
                  @for (line of poem.lines; track $index) {
                    <p>{{ line }}</p>
                  }
                </div>
              } @else {
                <div class="poem-preview">
                  @for (line of poem.lines.slice(0, 10); track $index) {
                    <p>{{ line }}</p>
                  }
                  <p class="more-lines">... ({{ poem.lines.length - 10 }} more lines)</p>
                </div>
              }
            </div>
          }
        </div>
      }
    </section>
  }

  <section class="console-info">
    <h3>Developer Console</h3>
    <p>Check your browser's developer console (F12) to see detailed API logs and error handling demonstrations.</p>
  </section>
</div>
